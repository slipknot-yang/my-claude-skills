# 관세 이상 탐지 Agent

Oracle DB에서 관세 신고 데이터의 이상 패턴을 탐지하여 과소신고, 분류 오류, 가격 조작 등 리스크를 식별합니다.

## 빠른 시작

```bash
# 패키지 설치
pip install oracledb pandas openpyxl

# 이상 탐지 실행
python detect_anomalies.py

# 결과 파일: customs_anomaly_report.xlsx
```

## 탐지 항목

| 리스크 유형 | 탐지 기준 | 결과 |
|-------------|-----------|------|
| 과소신고 | 심사가 > 신고가 130% | 100개 조합 |
| 단가 이상 | 표준편차 > 평균 | 50개 품목 |
| HS코드 변경 | 신고 HS ≠ 심사 HS | 50개 패턴 |
| 종합 리스크 | 복합 점수 | 50개 조합 |
| 고위험 업체 | 과소신고 다발 | 50개 업체 |

## 분석 결과 예시 (2023-2024)

```
🚨 이상 탐지 알림 요약

📌 과소신고 의심 TOP 3:
1. 8504 (전기 컨버터) + CN → 2,688건, 평균 1015% 차이, $45억 차액
2. 6402 (신발) + CN → 4,991건, 557% 차이, $36억 차액
3. 7318 (볼트/너트) + CN → 19건, 7887% 차이, $28억 차액

🏢 고위험 업체 TOP 3:
1. OPPO AGENCIES → 45,555건 (56.6% 과소신고), $4.6억
2. BULAND SUPERMARKET → 17,141건 (58.6%), $1.6천만
3. TOSH LOGISTICS → 9,714건 (86.2%), $1.2억
```

## Excel 출력 구조

```
customs_anomaly_report.xlsx
├── 요약                    # 전체 리스크 요약
├── 과소신고_의심           # 품목-국가별 과소신고 상세
├── 단가_이상               # 단가 이상치 품목
├── HS코드_변경             # 분류 변경 패턴
├── 품목국가_리스크         # 종합 리스크 점수
├── 고위험_업체             # 업체별 리스크
└── Claude_분석_가이드      # 분석 프롬프트
```

## Claude for Excel 연동

```excel
=CLAUDE("이 과소신고 데이터에서 의도적 탈세 패턴을 분석해주세요", A1:H50)
```

## 리스크 점수 산정

```
리스크 점수 = (과소신고율 × 3) + (HS변경율 × 2)

등급:
- HIGH (80+): 즉시 점검 필요
- MEDIUM (50-79): 정밀 심사 권장
- LOW (30-49): 모니터링
- NORMAL (0-29): 정상
```

## 파일 구조

```
customs-anomaly-detector/
├── README.md
├── SKILL.md                    # Claude Code 스킬 정의
├── detect_anomalies.py         # 탐지 스크립트
└── customs_anomaly_report.xlsx # 결과 파일
```
